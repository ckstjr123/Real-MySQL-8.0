# 10. 실행 계획

## 10.1 통계 정보

### 10.1.1 테이블 및 인덱스 통계 정보
### 10.1.2 히스토그램
### 10.1.3 코스트 모델(Cost Model)

---

## 10.2 실행 계획 확인

### 10.2.1 실행 계획 출력 포맷
- FORMAT 옵션을 통해 실행 계획 표시 방법을 단순 테이블뿐만 아니라 JSON, TREE 형태로 선택할 수 있음 ex) EXPLAIN FORMAT = TREE

### 10.2.2 쿼리의 실행 시간 확인
- EXPLAIN ANALYZE 명령으로 실제 쿼리를 실행하고 사용된 실행 계획과 단계별 소요 시간 확인

---

## 10.3 실행 계획 분석

### 10.3.1 id 컬럼
- 실행 계획에서 가장 왼쪽에 표시되는 id 컬럼은 **단위 SELECT** 쿼리별로 부여되는 식별자 값  
  하나의 SELECT 문장은 다시 1개 이상의 하위(SUB) SELECT 문장을 포함할 수 있음
- 하나의 SELECT 문장 안에서 여러개의 테이블을 조인하면 조인되는 테이블 개수만큼 실행 계획 레코드가 출력되지만 같은 id 값이 부여됨
- 실행 계획의 id 컬럼이 테이블 접근 순서를 의미하진 않음

### 10.3.2 select_type 컬럼
> 각 단위 SELECT 쿼리가 어떤 타입의 쿼리인지 표시되는 컬럼

#### 10.3.2.1 SIMPLE
- UNION이나 서브쿼리를 사용하지 않는 단순한 SELECT 쿼리인 경우 해당 쿼리 문장의 select_type은 SIMPLE로 표시됨(쿼리에 조인이 포함된 경우도 마찬가지)

#### 10.3.2.2 PRIMARY
- UNION이나 서브쿼리를 가지는 SELECT 쿼리의 실행 계획에서 가장 바깥쪽(OUTER)에 있는 단위 쿼리는 select_type이 PRIMARY로 표시됨
- SIMPLE과 마찬가지로 select_type이 PRIMARY인 단위 SELECT 쿼리는 하나만 존재

#### 10.3.2.3 UNION
- UNION으로 결합하는 단위 SELECT 쿼리 가운데 첫번째를 제외한 두번째 이후 단위 SELECT 쿼리의 select_type은 UNION으로 표시됨

#### 10.3.2.4 DEPENDENT UNION
- UNION/UNION ALL로 집합을 결합하는 쿼리에서 표시되며 DEPENDENT는 UNION/UNION ALL로 결합된 단위 쿼리가 외부 쿼리에 의해 영향을 받는 것을 의미

#### 10.3.2.5 UNION RESULT
- UNION 결과를 담아두는 임시 테이블
- MySQL 8.0 버전부터 UNION ALL은 임시 테이블을 사용하지 않음

#### 10.3.2.6 SUBQUERY
- select_type의 SUBQUERY는 **FROM 절 이외에서 사용되는 서브쿼리만**을 의미

#### 10.3.2.7 DEPENDENT SUBQUERY
- 바깥쪽(Outer) SELECT 쿼리의 컬럼에 의존적인 'SUBQUERY'
- DEPENDENT UNION과 같이 DEPENDENT SUBQUERY 또한 외부 쿼리가 먼저 수행된 후  
  서브쿼리가 실행돼야 하므로 일반 서브쿼리보단 처리 속도가 느릴 때가 많음

#### 10.3.2.8 DERIVED
- FROM 절에 사용된 서브쿼리는 select_type이 DERIVED로 표시됨
- DERIVED인 경우에 메모리나 디스크에 생성되는 임시 테이블을 MySQL에서는 '파생 테이블'이라고 함
- MySQL 8.0 버전부터는 FROM 절의 서브쿼리에 대한 최적화도 많이 개선되어 가능하다면 불필요한 서브쿼리는 조인으로 쿼리를 재작성해서 처리함

#### 10.3.2.9 DEPENDENT DERIVED







